# Quick GraphQL Reference for Copilot

## Common Jobber GraphQL Patterns

### Key Type Definitions (from jobber_schema.graphql.txt)

```graphql
type Client {
  id: ID!
  name: String
  # Check full schema for complete field list
}

type Request {
  id: ID!
  # Check schema for available fields
}

type ScheduledItem {
  id: ID!
  client: Client
  request: Request
  # Validate other fields against schema
}
```

### Established Query Patterns

#### Current Working Query (from JobberAPI.swift)
```graphql
query GetScheduledItems($first: Int!, $after: String) {
  scheduledItems(first: $first, after: $after) {
    edges {
      node {
        id
        client {
          id
          name
        }
        request {
          id
        }
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}
```

### ID Handling Rules

1. **GraphQL Response**: Base64-encoded (e.g., `Z2lkOi8vSm9iYmVyL0NsaWVudC84MDA0NDUzOA==`)
2. **Decoded Format**: `gid://Jobber/Client/80044538`
3. **Web URL Format**: Numeric only (`80044538`)
4. **Conversion**: Use `extractNumericId()` from `DataModels.swift`

### URL Construction Priority

1. **Client URLs**: `https://secure.getjobber.com/clients/{numericId}` (preferred)
2. **Work Order URLs**: `https://secure.getjobber.com/work_orders/{numericId}`
3. **Request URLs**: `https://secure.getjobber.com/requests/{numericId}`

### Validation Checklist

- [ ] All field names exist in `jobber_schema.graphql.txt`
- [ ] Field types match schema definitions
- [ ] Nested paths are valid
- [ ] ID conversion implemented for web URLs
- [ ] Error handling included
- [ ] Debug logging added

### Schema File Locations

- **Full Schema**: `DTS App/DTS App/Docs/GraphQL/jobber_schema.graphql.txt`
- **API Reference**: `DTS App/DTS App/Docs/GraphQL/JOBBER_API_REFERENCE.md`
- **Technical Guide**: `DTS App/DTS App/Docs/GraphQL/The Jobber GraphQL API_*.pdf`

---
*Always reference the full schema file before making GraphQL suggestions*
